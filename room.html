<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>N-Mario</title>
    <link href='./assets/libs/semantic-ui/css/semantic.min.css' rel='stylesheet'>
    <link href='./assets/libs/mario-fonts/css/mario-fonts.css' rel='stylesheet'>
    <link href='./assets/css/N-Mario.css' rel='stylesheet'>
    <link href='./favicon.ico' rel='shortcut icon'>
  </head>
  <body>
    <div class='ui fixed inverted red main menu'>
      <div class='container'>
        <a class='ui title item' href='./'>N-Mario</a>
        <span class='item'>Room X</span>
        <div class='right menu'>
          <a class='item' href='#' id='player_name'></a>
        </div>
      </div>
    </div>
    <div class='container' id='content'>
      <h1 class='ui header center aligned'>N-Mario Room X</h1>
      <div class='ui grid'>
        <div class='eleven wide column'>
          <table class='ui red basic table segment'>
            <thead>
              <tr>
                <th class='ten wide'>Name</th>
                <th class='two wide'>Color</th>
                <th class='two wide'>State</th>
                <th class='two wide'>Kick</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Cherry</td>
                <td>Red</td>
                <td><i class='icon checkmark'></i></td>
                <td></td>
              </tr>
              <tr>
                <td>Fishball</td>
                <td>Green</td>
                <td><i class='icon checkmark'></i></td>
                <td><i class='icon close'></i></td>
              </tr>
              <tr>
                <td>Simon</td>
                <td>Blue</td>
                <td><i class='icon checkmark'></i></td>
                <td><i class='icon close'></i></td>
              </tr>
              <tr>
                <td>Francis</td>
                <td>Yellow</td>
                <td><i class='icon checkmark'></i></td>
                <td><i class='icon close'></i></td>
              </tr>
            </tbody>
          </table>
          <div class='ui red segment'>
            <div class='ui form'>
              <div class='field'>
                <textarea>Chatroom</textarea>
              </div>
              <div class='field'>
                <input type='text' placeholder='Send a message...'>
              </div>
            </div>
          </div>
          <div class='ui form'>
            <div class='inline field'>
              <div class='ui checkbox'>
                <input type='checkbox'>
                <label>I'm Ready</label>
              </div>
            </div>
            <button class='ui red large button'>
              Start Game
            </button>
            <button class='ui large button floated right'>
              Cancel
            </button>
          </div>
        </div>
        <div class='five wide column'>
          <div class='ui red segment'>
            Settings
          </div>
        </div>
      </div>
    </div>
    <div class='ui modal' id='edit_player_name'>
      <i class='close icon'></i>
      <div class='header'>
        Edit Player Name
      </div>
      <div class='content'>
        <div class='ui form'>
          <div class='field'>
            <label>New Name</label>
            <div class='ui input huge'>
              <input type='text' placeholder='Mario' id='input_player_name'>
            </div>
          </div>
        </div>
      </div>
      <div class='actions'>
        <div class='ui button black'>Cancel</div>
        <div class='ui button positive right labeled icon button'>
          OK
          <i class='checkmark icon'></i>
        </div>
      </div>
    </div>
    <script src='./assets/libs/jquery/jquery.min.js' type='text/javascript'></script>
    <script src='./assets/libs/semantic-ui/javascript/semantic.min.js' type='text/javascript'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js' type='text/javascript'></script>
    <script src='./assets/js/common.js' type='text/javascript'></script>
    <script type='text/javascript'>
      var socket = io.connect('http://n-mario.herokuapp.com:80');
      //var socket = io.connect('http://localhost:8080');

      var id = sessionStorage['id'],
          name,
          room = sessionStorage['room'];

      if (!localStorage['name']) {
        localStorage['name'] = 'Player';
      }
      name = localStorage['name'];

      if (!id) id = null;
      if (!room) {
        room = 0;
        sessionStorage['room'] = room;
      }

      socket.on('connect', function() {
        // request to join a room
        socket.emit('join', { name: name, id: id, room: room });
      });

      socket.on('join accept', function(data) {
        sessionStorage['id'] = data.id;
        id = data.id;

      });
      socket.on('new player', function(data) {
        console.log(data);
      });
    </script>
  </body>
</html>
